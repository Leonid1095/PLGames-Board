# AI Onboarding (First Run)

–≠—Ç–∞ —à–ø–∞—Ä–≥–∞–ª–∫–∞ –¥–ª—è –ª—é–±–æ–≥–æ –ò–ò-–∞–≥–µ–Ω—Ç–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ **PLGames-Board**.

## üìñ –ß—Ç–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ —ç—Ç–æ–º –ø–æ—Ä—è–¥–∫–µ)

1. **`ROADMAP.md`** ‚Äî —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å, –ø—Ä–∏–Ω—è—Ç—ã–µ —Ä–µ—à–µ–Ω–∏—è, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ —á—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. **`AI_ONBOARDING.md`** (—ç—Ç–æ—Ç —Ñ–∞–π–ª) ‚Äî –∫—Ä–∞—Ç–∫–∞—è –∫–∞—Ä—Ç–∞ –∏ –Ω–∞—á–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
3. **`TECHNICAL_AUDIT.md`** ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ DI, –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è
4. **`INSTALLATION_QUICK.md`** ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –±–µ–∑ –æ–ø—ã—Ç–∞
5. **`ARCHITECTURE.md`** ‚Äî –æ–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
6. **`README.md`** ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

---

## üó∫Ô∏è –ö–∞—Ä—Ç–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
plgames/
‚îú‚îÄ‚îÄ Dockerfile           # Multi-stage Docker —Å–±–æ—Ä–∫–∞ (Builder ‚Üí Backend ‚Üí Frontend)
‚îú‚îÄ‚îÄ docker-compose.yml   # –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ packages/
‚îÇ   ‚îú‚îÄ‚îÄ backend/server/src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.module.ts          # –ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å Nest –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ crm/               # CRM –º–æ–¥—É–ª—å (resolver, service, models)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user/              # User –º–æ–¥—É–ª—å (resolver, service)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ permission/        # Permission –º–æ–¥—É–ª—å (DI, —Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–∞)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prisma/            # Prisma –º–æ–¥—É–ª—å (–≥–ª–æ–±–∞–ª—å–Ω—ã–π, PrismaClient)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models/                # –í—Å–µ Models –¥–ª—è DB (–≥–ª–æ–±–∞–ª—å–Ω—ã–π ModelsModule)
‚îÇ   ‚îú‚îÄ‚îÄ frontend/        # React –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ common/          # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –∏ —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ blocksuite/          # –†–µ–¥–∞–∫—Ç–æ—Ä –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îî‚îÄ‚îÄ scripts/             # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (deploy, build, test)
```

---

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ü—Ä–æ–±–ª–µ–º—ã (–†–ï–®–ï–ù–´)

### –ü—Ä–æ–±–ª–µ–º–∞ 1: Type-Only Imports –≤ Constructors
**–°—É—Ç—å:** `import type { Service }` ‚Üí TypeScript —Å—Ç–∏—Ä–∞–µ—Ç –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ ‚Üí Nest –≤–∏–¥–∏—Ç `Object` –≤–º–µ—Å—Ç–æ –∫–ª–∞—Å—Å–∞ ‚Üí DI error.

**–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ constructors –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å value-–∏–º–ø–æ—Ä—Ç–∞–º–∏:
```typescript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
import type { PrismaClient } from '@prisma/client';

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
import { PrismaClient } from '@prisma/client';
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ú–æ–¥—É–ª–∏ –ù–µ –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç Global Providers
**–°—É—Ç—å:** `PrismaModule` - –≥–ª–æ–±–∞–ª—å–Ω—ã–π, –Ω–æ –µ—Å–ª–∏ –º–æ–¥—É–ª—å –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –µ–≥–æ —è–≤–Ω–æ ‚Üí –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –º–æ–¥—É–ª—è.

**–†–µ—à–µ–Ω–∏–µ:** –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –î–û–õ–ñ–ï–ù –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –Ω—É–∂–Ω—ã–µ –º–æ–¥—É–ª–∏ –≤ `imports:`:
```typescript
@Module({
  imports: [PrismaModule, PermissionModule],  // <- –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
  providers: [MyResolver],
})
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: PrismaService vs PrismaClient
**–°—É—Ç—å:** –í –ø—Ä–æ–µ–∫—Ç–µ –Ω–µ—Ç `PrismaService` - —Ç–æ–ª—å–∫–æ `PrismaClient` –∏–∑ `@prisma/client` —á–µ—Ä–µ–∑ `PrismaModule`.

**–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ–≥–¥–∞ –∏–Ω–∂–µ–∫—Ç–∏—Ä—É–π `PrismaClient` (–Ω–µ `PrismaService`).

---

## üîß –ë–∞–∑–æ–≤—ã–π –ê–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –ò–ò

### 1Ô∏è‚É£ –ü—Ä–∏ –ü–µ—Ä–≤–æ–º –ó–∞–ø—É—Å–∫–µ
```bash
# –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ —ç—Ç–æ–º –ø–æ—Ä—è–¥–∫–µ:
# 1. ROADMAP.md (5 –º–∏–Ω) - —á—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è
# 2. TECHNICAL_AUDIT.md (10 –º–∏–Ω) - —á—Ç–æ –±—ã–ª–æ —Å–ª–æ–º–∞–Ω–æ
# 3. –≠—Ç–æ AI_ONBOARDING.md (5 –º–∏–Ω)
# 4. ARCHITECTURE.md (10 –º–∏–Ω) - –∫–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω–æ
```

### 2Ô∏è‚É£ –ü—Ä–∏ DI –û—à–∏–±–∫–µ –≤ –õ–æ–≥–∞—Ö
```typescript
// –û—à–∏–±–∫–∞: "Nest can't resolve dependencies of the X (?, Y)"

// –î–µ–π—Å—Ç–≤–∏—è:
1. –û–ø—Ä–µ–¥–µ–ª–∏ –∫–∞–∫–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä "?" (–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π - –∏–Ω–¥–µ–∫—Å)
2. –ü–æ—Å–º–æ—Ç—Ä–∏ constructor X - –∫–∞–∫–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–∞ —ç—Ç–æ–º –∏–Ω–¥–µ–∫—Å–µ
3. –ü—Ä–æ–≤–µ—Ä—å –∏–º–ø–æ—Ä—Ç - value –∏–ª–∏ type?
4. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –º–æ–¥—É–ª—å –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –º–æ–¥—É–ª—å
5. –ö–æ–º–º–∏—Ç –∏ –ø—É—à, –∑–∞—Ç–µ–º –¥–∞–π –≤—Ä–µ–º—è CI —Å–æ–±—Ä–∞—Ç—å –Ω–æ–≤—ã–π –æ–±—Ä–∞–∑
```

### 3Ô∏è‚É£ –ü—Ä–∏ –î–µ–ø–ª–æ–µ –ù–∞ –°–µ—Ä–≤–µ—Ä
```bash
# –ù–ê –°–ï–†–í–ï–†–ï:
git pull                                  # –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥
docker compose pull backend              # –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π –æ–±—Ä–∞–∑ –∏–∑ GHCR
docker compose up -d --force-recreate backend  # –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose logs -n 100 backend       # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
```

**–ö–ª—é—á:** GitHub Actions —Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ñ–¥–∏—Ç–µ 5-10 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ push.

---

## ‚úÖ –û—à–∏–±–∫–∏ –ö–æ—Ç–æ—Ä—ã–µ –ú—ã –£–∂–µ –ò—Å–ø—Ä–∞–≤–∏–ª–∏

| –†–µ–∑–æ–ª–≤–µ—Ä | –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ | –ö–æ–º–º–∏—Ç |
|----------|---------|--------|--------|
| CrmIssueResolver | PrismaService | ‚Üí PrismaClient | cf6fa6055 |
| CrmSprintResolver | PrismaService | ‚Üí PrismaClient | 402cf3a9e |
| CrmCommentResolver | PrismaService | ‚Üí PrismaClient | 402cf3a9e |
| CrmTimeLogResolver | PrismaService | ‚Üí PrismaClient | 402cf3a9e |
| UserManagementResolver | type-only PrismaClient | ‚Üí value-import | d7824ab8a |
| UserModule | –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç PrismaModule | ‚Üí –¥–æ–±–∞–≤–ª–µ–Ω import | be427c813 |

---

## üìù –ü—Ä–∞–≤–∏–ª–∞ –î–ª—è –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –ü—Ä–∏ –î–æ–±–∞–≤–ª–µ–Ω–∏–∏ Resolver/Service:

**1. –û–ø—Ä–µ–¥–µ–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```typescript
@Resolver(() => MyType)
export class MyResolver {
  constructor(
    private readonly service: MyService,
    private readonly models: Models,
    private readonly prisma: PrismaClient
  ) {}
}
```

**2. –ò–º–ø–æ—Ä—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å VALUE (–Ω–µ type):**
```typescript
import { MyService } from '../my-service';       // ‚úÖ value
import { PrismaClient } from '@prisma/client';   // ‚úÖ value
import { Models } from '../../models';           // ‚úÖ value

// ‚ùå –ù–ò–ö–û–ì–î–ê:
import type { MyService } from '../my-service';
```

**3. –î–æ–±–∞–≤—å –≤ –º–æ–¥—É–ª—å:**
```typescript
@Module({
  imports: [PrismaModule, MyServiceModule],  // <- –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π
  providers: [MyResolver, ...],
  exports: [MyResolver],
})
export class MyModule {}
```

**4. –ü–µ—Ä–µ–¥ –ø—É—à–µ–º:**
```bash
yarn typecheck          # –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø—ã
git add .
git commit -m "feat: add MyResolver with proper DI"
git push origin main
```

---

## üß™ –ö–∞–∫ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –õ–æ–∫–∞–ª—å–Ω–æ

```bash
# 1. –°–æ–±–µ—Ä–∏ backend –ª–æ–∫–∞–ª—å–Ω–æ
docker compose build --no-cache backend

# 2. –ó–∞–ø—É—Å—Ç–∏ –≤—Å—ë
docker compose down -v
docker compose up -d

# 3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ DI
docker compose logs -n 200 backend | grep -E "ERROR|Exception|Depend"

# 4. –ï—Å–ª–∏ —á–∏—Å—Ç–æ - –ø—Ä–æ–≤–µ—Ä—å –∑–¥–æ—Ä–æ–≤—å–µ:
curl http://localhost:3010/api/healthz
# –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: { "status": "ok" } –∏–ª–∏ –ø–æ—Ö–æ–∂–µ
```

---

## üåç –î–ª—è –ö–ª–∏–µ–Ω—Ç–æ–≤ (–ë–µ–∑ –û–ø—ã—Ç–∞)

**–§–∞–π–ª:** `INSTALLATION_QUICK.md`

–°–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—à–∞–≥–æ–≤—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ:
- –ù–µ –∑–Ω–∞–µ—Ç Docker
- –ù–µ –∑–Ω–∞–µ—Ç Linux
- –•–æ—á–µ—Ç –ø—Ä–æ—Å—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

**One-liner –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
```bash
curl -sSL https://raw.githubusercontent.com/Leonid1095/PLGames-Board/main/install.sh | bash
```

---

## üö® –í–∞–∂–Ω—ã–µ –ó–∞–º–µ—á–∞–Ω–∏—è

1. **NestJS DI —Ç—Ä–µ–±—É–µ—Ç runtime —Ç–∏–ø–æ–≤** ‚Üí –∏–∑–±–µ–≥–∞–π `import type { }`–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö
2. **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ —Ç—Ä–µ–±—É—é—Ç —è–≤–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞** ‚Üí –Ω–µ –ø–æ–ª–∞–≥–∞–π—Å—è –Ω–∞ @Global()
3. **Docker Compose –∏—Å–ø–æ–ª—å–∑—É–µ—Ç latest –æ–±—Ä–∞–∑** ‚Üí –ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞ –∂–¥–∏—Ç–µ CI (5-10 –º–∏–Ω—É—Ç)
4. **–ü–µ—Ä–≤—ã–π –ø—É—à –≤ main ‚Üí CI —Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑** ‚Üí –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–π `docker compose pull`
5. **–ù–µ –º–µ–Ω—è–π –≤–µ—Ä—Å–∏–∏ Node/Yarn** ‚Üí —É–∫–∞–∑–∞–Ω—ã –≤ `package.json` –∏ `Dockerfile` –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ

---

## üìû –ï—Å–ª–∏ –ß—Ç–æ-—Ç–æ –°–ª–æ–º–∞–ª–æ—Å—å

**–ß–µ–∫-–ª–∏—Å—Ç –æ—Ç–ª–∞–¥–∫–∏:**

```bash
# 1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker compose logs -n 100 backend | tail -50

# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker compose restart backend

# 3. –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å
docker compose down
docker compose up -d

# 4. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
docker compose build --no-cache backend
docker compose up -d

# 5. –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ:
# - –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ TECHNICAL_AUDIT.md —Ä–∞–∑–¥–µ–ª "DI –û—à–∏–±–∫–∏"
# - –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ commits –≤ GitHub
# - –û—Ç–∫—Ä–æ–π—Ç–µ Issue
```

---

**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –≤—ã –∑–Ω–∞–µ—Ç–µ –∫–∞–∫ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –∏ —Ñ–∏–∫—Å–∏—Ç—å PLGames Board! üöÄ**

