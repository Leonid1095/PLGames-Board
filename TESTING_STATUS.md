# PLGames Board - Testing Status

**–î–∞—Ç–∞:** 2024-12-14
**–°—Ç–∞—Ç—É—Å:** –û–∂–∏–¥–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏ –Ω–∞ GitHub Actions

---

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ

1. **Dockerfile —É–ø—Ä–æ—â–µ–Ω** (commit a067f87d9)
   - –£–±—Ä–∞–Ω–∞ —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä—É—á–Ω–æ–≥–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è Prisma engines
   - –¢–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ `prisma generate` —Å retry –ª–æ–≥–∏–∫–æ–π
   - –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ GitHub Actions (–≤–Ω–µ –†–æ—Å—Å–∏–∏)

2. **install.sh –æ–±–Ω–æ–≤–ª–µ–Ω** (commit 8deb59fb6)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `docker compose pull` –≤–º–µ—Å—Ç–æ `--build`
   - –°–∫–∞—á–∏–≤–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã –∏–∑ ghcr.io
   - –í—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏: 5-10 –º–∏–Ω (–≤–º–µ—Å—Ç–æ 20-30 –º–∏–Ω)

3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞**
   - DEPLOYMENT_RUSSIA.md - —á–µ—Ç–∫–æ –æ–±—ä—è—Å–Ω—è–µ—Ç –ø–æ—á–µ–º—É –ª–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - QUICK_TEST.md - –æ–±–Ω–æ–≤–ª–µ–Ω –ø–æ–¥ –Ω–æ–≤—ã–π workflow —Å –≥–æ—Ç–æ–≤—ã–º–∏ –æ–±—Ä–∞–∑–∞–º–∏
   - ROADMAP.md - –æ–ø–∏—Å–∞–Ω—ã –∑–µ—Ä–∫–∞–ª–∞ –¥–ª—è Rust/Cargo

4. **GitHub Actions –Ω–∞—Å—Ç—Ä–æ–µ–Ω** (.github/workflows/build-docker.yml)
   - –°–æ–±–∏—Ä–∞–µ—Ç backend –∏ frontend –æ–±—Ä–∞–∑—ã
   - –ü—É–±–ª–∏–∫—É–µ—Ç –≤ ghcr.io/leonid1095/plgames-board-*
   - –¢—Ä–∏–≥–≥–µ—Ä–∏—Ç—Å—è –ø—Ä–∏ push –≤ main –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ plgames/**, packages/**

---

## üîÑ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

**GitHub Actions —Å–µ–π—á–∞—Å —Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑—ã —Å —É–ø—Ä–æ—â–µ–Ω–Ω—ã–º Dockerfile**

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å: https://github.com/Leonid1095/PLGames-Board/actions

**–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è:** 15-20 –º–∏–Ω—É—Ç

---

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏)

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ–±—Ä–∞–∑—ã –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã

```bash
# –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–∫–∞—á–∞—Ç—å –æ–±—Ä–∞–∑—ã
docker pull ghcr.io/leonid1095/plgames-board-backend:latest
docker pull ghcr.io/leonid1095/plgames-board-frontend:latest

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã
docker images | grep plgames-board
```

**–û–∂–∏–¥–∞–µ–º–æ:**
- backend: ~800 MB
- frontend: ~50 MB

### 2. –¢–µ—Å—Ç –ø–æ–ª–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –†–æ—Å—Å–∏–∏

–ù–∞ **–î–†–£–ì–û–ú —Å–µ—Ä–≤–µ—Ä–µ** (–Ω–µ /home/plg/plane, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É —Å –Ω—É–ª—è):

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
bash <(curl -fsSL https://raw.githubusercontent.com/Leonid1095/PLGames-Board/main/install.sh)

# –ü—Ä–∏ –ø—Ä–æ–º–ø—Ç–∞—Ö:
# - Domain: localhost
# - Ports: 80, 443 (default)
# - Firewall: n
# - Confirm: y
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
1. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–ª–æ–Ω–∏—Ä—É–µ—Ç—Å—è –≤ ~/plgames-board
2. –°–æ–∑–¥–∞–µ—Ç—Å—è .env —Ñ–∞–π–ª
3. –°–∫–∞—á–∏–≤–∞—é—Ç—Å—è –≥–æ—Ç–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã (~850 MB total)
4. –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
5. Backend —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è healthy (~1-2 –º–∏–Ω)
6. –î–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
cd ~/plgames-board

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker compose ps
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å "Up" –∏–ª–∏ "Up (healthy)"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose logs backend --tail=50
docker compose logs frontend --tail=20

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å healthcheck
curl http://localhost:3010/api/healthz
# –û–∂–∏–¥–∞–µ–º–æ: HTTP 200 OK
```

–û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost`

**–û–∂–∏–¥–∞–µ–º–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:** –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–≤—Ö–æ–¥–∞ PLGames Board

### 4. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

- Email: `admin@test.local`
- –ü–∞—Ä–æ–ª—å: –ª—é–±–æ–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π
- **–ü–µ—Ä–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å = –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–º–∏–Ω**

### 5. –¢–µ—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
cd ~/plgames-board

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker compose down

# –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ –∂–µ –æ–±—Ä–∞–∑—ã)
docker compose pull
docker compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å
curl http://localhost:3010/api/healthz
```

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞:
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è (postgres_data volume)
- ‚úÖ –§–∞–π–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è (storage_data volume)
- ‚úÖ –°–µ—Å—Å–∏–∏ –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è (redis_data volume)

---

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –û–±—Ä–∞–∑—ã –Ω–µ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º:**
```
Error response from daemon: manifest for ghcr.io/leonid1095/plgames-board-backend:latest not found
```

**–ü—Ä–∏—á–∏–Ω–∞:** GitHub Actions –µ—â—ë –Ω–µ –∑–∞–∫–æ–Ω—á–∏–ª —Å–±–æ—Ä–∫—É –∏–ª–∏ –æ–Ω–∞ —É–ø–∞–ª–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å https://github.com/Leonid1095/PLGames-Board/actions
2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ run
3. –ï—Å–ª–∏ —Å–±–æ—Ä–∫–∞ —É–ø–∞–ª–∞ - –∏—Å–ø—Ä–∞–≤–∏—Ç—å Dockerfile –∏ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å

### Backend –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç

**–°–∏–º–ø—Ç–æ–º:**
```
docker compose logs backend
# Error: Cannot find module '@affine/server-native'
```

**–ü—Ä–∏—á–∏–Ω–∞:** –û–±—Ä–∞–∑ —Å–æ–±—Ä–∞–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (–Ω–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã —Ñ–∞–π–ª—ã)

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Dockerfile —Å–µ–∫—Ü–∏—é COPY --from=builder
2. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã
3. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –Ω–∞ GitHub Actions

### Frontend –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 502 Bad Gateway

**–°–∏–º–ø—Ç–æ–º:** –ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "502 Bad Gateway" –æ—Ç Caddy

**–ü—Ä–∏—á–∏–Ω–∞:** Backend –µ—â—ë –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å backend
docker compose logs backend --tail=100

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å healthcheck
docker compose exec backend curl http://localhost:3010/api/healthz

# –ü–æ–¥–æ–∂–¥–∞—Ç—å 1-2 –º–∏–Ω—É—Ç—ã –ø–æ–∫–∞ backend –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

1. ‚úÖ GitHub Actions —Å–æ–±—Ä–∞–ª –æ–±—Ä–∞–∑—ã –±–µ–∑ –æ—à–∏–±–æ–∫
2. ‚úÖ –û–±—Ä–∞–∑—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ ghcr.io
3. ‚úÖ install.sh —Å–∫–∞—á–∏–≤–∞–µ—Ç –æ–±—Ä–∞–∑—ã –≤ –†–æ—Å—Å–∏–∏ **–±–µ–∑ VPN**
4. ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è healthy
5. ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
6. ‚úÖ –ú–æ–∂–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
7. ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
8. ‚úÖ –í—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏: **5-10 –º–∏–Ω—É—Ç** (–Ω–µ 20-30!)

---

**–ö–æ–≥–¥–∞ –≤—Å–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã - PLGames Board –≥–æ—Ç–æ–≤ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –†–æ—Å—Å–∏–∏! üéâ**
