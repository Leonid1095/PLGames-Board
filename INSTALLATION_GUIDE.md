# ğŸ® PLGames Board - Installation Guide

> **One-line installation** for anyone, anywhere. No technical knowledge required.

---

## Quick Start (1 minute)

Copy and paste this command in your Linux terminal:

```bash
bash <(curl -fsSL https://raw.githubusercontent.com/Leonid1095/PLGames-Board/main/install.sh)
```

That's it! The script will:
- âœ… Check system requirements (Docker, disk space)
- âœ… Ask for your domain (or use localhost)
- âœ… Download pre-built Docker images
- âœ… Set up database with secure password
- âœ… Configure firewall (optional)
- âœ… Start all services automatically

---

## Prerequisites

### Minimum Requirements
- **OS:** Linux (Ubuntu 20.04+, Debian 11+, CentOS 8+)
- **Docker:** 20.10+ ([install](https://docs.docker.com/get-docker/))
- **Docker Compose:** V2 ([install](https://docs.docker.com/compose/install/))
- **RAM:** 4GB (runtime), 8GB+ for smooth operation
- **Disk:** 20GB free space
- **Internet:** Stable connection to download images (5-10 minutes)

### Optional for Production
- **Domain name** (for HTTPS)
- **DNS access** (to point domain to your server)
- **Firewall access** (to open ports 80/443)

---

## Installation Methods

### Method 1: Interactive Installation (Recommended)

#### 1. SSH to your server
```bash
ssh user@your-server-ip
```

#### 2. Run the installer
```bash
bash <(curl -fsSL https://raw.githubusercontent.com/Leonid1095/PLGames-Board/main/install.sh)
```

#### 3. Answer the questions
```
Enter domain [localhost]: example.com
HTTP port [80]: 80
HTTPS port [443]: 443
Configure firewall? (y/n) [n]: y
Proceed? (y/n) [y]: y
```

#### 4. Wait 1-2 minutes for services to start
```
âœ“ Docker images downloaded
âœ“ Containers started
âœ“ All services are healthy
```

#### 5. Open in browser
Go to `https://example.com` (or `http://localhost` for local)

---

### Method 2: Manual Installation (For Advanced Users)

```bash
# Clone repository
git clone https://github.com/Leonid1095/PLGames-Board.git ~/plgames-board
cd ~/plgames-board

# Create .env file (copy from .env.example or create custom)
cp .env.example .env
nano .env  # Edit as needed

# Start services (uses pre-built images, no build)
docker compose up -d

# Check status
docker compose ps
docker compose logs -f backend
```

---

## Configuration Guide

### .env File

The most important variables:

```bash
# Basic
DOMAIN=example.com              # Your domain (or localhost)
BASE_URL=https://example.com    # Full URL

# Ports
HTTP_PORT=80                    # Public HTTP port
HTTPS_PORT=443                  # Public HTTPS port

# Database (auto-generated by installer)
DB_PASSWORD=...                 # Auto-generated 32-char password

# Optional: AI Features
AFFINE_COPILOT_ENABLED=false    # Set to true to enable AI
# AFFINE_COPILOT_OPENROUTER_API_KEY=sk-or-v1-...  # Get from OpenRouter.ai

# Optional: OAuth (Yandex)
# OIDC_CLIENT_ID=...
# OIDC_CLIENT_SECRET=...
```

**Note:** The installer generates all required values automatically.

---

## First-Time Setup

1. **Access the web interface**
   - Go to your configured domain/IP
   - You should see the login page

2. **Create admin account**
   - Click "Sign up"
   - The first user to register becomes the admin
   - Fill in email and password

3. **Start using PLGames Board**
   - Create your first workspace
   - Invite team members
   - Start collaborating!

---

## Common Tasks

### Check if everything is running
```bash
docker compose ps

# Output should show all containers as "Up"
```

### View logs
```bash
# All services
docker compose logs -f

# Specific service
docker compose logs -f backend
docker compose logs -f frontend
docker compose logs -f postgres
```

### Restart services
```bash
docker compose restart

# Or just backend
docker compose restart backend
```

### Stop services
```bash
docker compose down

# Remove all data too (careful!)
docker compose down -v
```

### Update to latest version
```bash
cd ~/plgames-board
git pull origin main
docker compose pull
docker compose up -d
```

### Backup database
```bash
docker compose exec postgres pg_dump -U plgames plgames > backup.sql
```

### Restore database
```bash
cat backup.sql | docker compose exec -T postgres psql -U plgames plgames
```

---

## Troubleshooting

### "Image not found" error
**Problem:** Docker images failed to download

**Solutions:**
1. Check internet connection: `curl -I https://ghcr.io`
2. Wait for GitHub Actions to build images (first time ~15 minutes)
3. Check build status: https://github.com/Leonid1095/PLGames-Board/actions
4. If in Russia, ensure you can access ghcr.io (may need VPN)

### Backend won't start (CopilotWorkspaceConfigModel error)
**Problem:** Old image without latest fixes

**Solution:**
```bash
docker compose pull backend
docker compose up -d --force-recreate backend
docker compose logs -f backend
```

### "Port already in use" error
**Problem:** Port 80 or 443 is occupied

**Solution:**
```bash
# Find what's using the port
sudo lsof -i :80
sudo lsof -i :443

# Use different ports in .env
HTTP_PORT=8080
HTTPS_PORT=8443

# Restart
docker compose up -d
```

### PostgreSQL won't start
**Problem:** Database initialization failed

**Solution:**
```bash
# Remove corrupted data and restart
docker compose down -v
docker compose up -d

# Or check logs
docker compose logs postgres
```

### Cannot access from external IP
**Problem:** Firewall or port forwarding not configured

**Solutions:**
1. Check if ports are open: `nmap your-ip -p 80,443`
2. Configure firewall:
   ```bash
   sudo ufw allow 80/tcp
   sudo ufw allow 443/tcp
   sudo ufw enable
   ```
3. If behind router: configure port forwarding to your server IP
4. For domain access: verify DNS points to your server IP

### High memory usage
**Problem:** Services consuming too much RAM

**Solution:**
```bash
# Limit Docker container memory
docker update --memory 2g plgames-board-backend-1
docker update --memory 1g plgames-board-postgres-1
docker update --memory 512m plgames-board-frontend-1

# Restart
docker compose restart
```

---

## Production Best Practices

### 1. Use a domain name
- Get free domain: namecheap.com, cloudflare.com
- HTTPS will be auto-issued by Let's Encrypt
- Much better for team access

### 2. Set up automatic backups
```bash
# Add to crontab for daily backups
0 2 * * * docker compose exec -T postgres pg_dump -U plgames plgames > /backup/plgames_$(date +\%Y\%m\%d).sql
```

### 3. Monitor logs
```bash
# View errors in real-time
docker compose logs -f --tail=100 backend
```

### 4. Update regularly
```bash
# Check for updates weekly
cd ~/plgames-board
git pull origin main
docker compose pull
docker compose up -d
```

### 5. Secure your setup
- Change default `DB_PASSWORD` in `.env` (installer does this)
- Use strong admin password
- Keep SSH key-based auth enabled
- Use firewall to restrict access if needed

---

## Getting Help

### Documentation
- **Full README:** [README.md](README.md)
- **Architecture:** [ARCHITECTURE.md](ARCHITECTURE.md)
- **Deployment Guide:** [DEPLOYMENT_RUSSIA.md](DEPLOYMENT_RUSSIA.md)

### Support
- **Issues:** https://github.com/Leonid1095/PLGames-Board/issues
- **GitHub Discussions:** https://github.com/Leonid1095/PLGames-Board/discussions

### Common Questions

**Q: Is my data safe?**
A: Data is stored in PostgreSQL with automatic backups. Encryption available with env vars.

**Q: Can I migrate data later?**
A: Yes! Full database backups are possible with `pg_dump`.

**Q: What if I exceed resource limits?**
A: Run on a server with more RAM/CPU, or optimize by limiting concurrent users.

**Q: Can multiple people be admins?**
A: Yes, any user can be promoted to admin via the settings panel.

**Q: Is offline access possible?**
A: Not currently, but stored data is always in your database.

---

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Your PLGames Board                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  Frontend         Backend        Database   â”‚
â”‚  (Vite)          (NestJS)      (PostgreSQL)â”‚
â”‚  Port 80/443     Port 3010       Port 5432 â”‚
â”‚                                             â”‚
â”‚  â†“ Cached by Redis, served via Caddy       â”‚
â”‚                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Docker Compose (automated management)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**All data stored locally:** No cloud uploads, no third-party servers.

---

## License

PLGames Board is built on [AFFiNE](https://github.com/toeverything/AFFiNE) and licensed under MIT.

---

**Ready to get started?** Run the installer now:

```bash
bash <(curl -fsSL https://raw.githubusercontent.com/Leonid1095/PLGames-Board/main/install.sh)
```

ğŸ® **Happy collaborating!**
